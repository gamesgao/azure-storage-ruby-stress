<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Minitest::Reporters::HtmlReporter - minitest-reporters-1.1.19 Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
  var index_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/darkfish.js"></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="BaseReporter.html">Minitest::Reporters::BaseReporter</a>
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li class="calls-super" ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-compare_suites">#compare_suites</a>
    
    <li ><a href="#method-i-compare_suites_by_name">#compare_suites_by_name</a>
    
    <li ><a href="#method-i-compare_tests">#compare_tests</a>
    
    <li ><a href="#method-i-compare_tests_by_name">#compare_tests_by_name</a>
    
    <li ><a href="#method-i-friendly_name">#friendly_name</a>
    
    <li ><a href="#method-i-html_file">#html_file</a>
    
    <li ><a href="#method-i-location">#location</a>
    
    <li ><a href="#method-i-message_for">#message_for</a>
    
    <li ><a href="#method-i-passes">#passes</a>
    
    <li ><a href="#method-i-percent_errors_failures">#percent_errors_failures</a>
    
    <li ><a href="#method-i-percent_passes">#percent_passes</a>
    
    <li ><a href="#method-i-percent_skipps">#percent_skipps</a>
    
    <li class="calls-super" ><a href="#method-i-report">#report</a>
    
    <li class="calls-super" ><a href="#method-i-start">#start</a>
    
    <li ><a href="#method-i-summarize_suite">#summarize_suite</a>
    
    <li ><a href="#method-i-test_fail_or_error-3F">#test_fail_or_error?</a>
    
    <li ><a href="#method-i-total_time_to_hms">#total_time_to_hms</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Minitest::Reporters::HtmlReporter">
  <h1 id="class-Minitest::Reporters::HtmlReporter" class="class">
    class Minitest::Reporters::HtmlReporter
  </h1>

  <section class="description">
    
<p>A reporter for generating HTML test reports This is recommended to be used
with a CI server, where the report is kept as an artifact and is accessible
via a shared link</p>

<p>The reporter sorts the results alphabetically and then by results so that
failing and skipped tests are at the top.</p>

<p>When using <a href="../../Minitest.html">Minitest</a> Specs, the number
prefix is dropped from the name of the test so that it reads well</p>

<p>On each test run all files in the reports directory are deleted, this
prevents a build up of old reports</p>

<p>The report is generated using ERB. A custom ERB template can be provided
but it is not required The default ERB template uses JQuery and Bootstrap,
both of these are included by referencing the CDN sites</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-i-title" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">title</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>The title of the report</p>
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(args = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>The constructor takes a hash, and uses the following keys: :title - the
title that will be used in the report, defaults to &#39;Test Results&#39;
:reports_dir - the directory the reports should be written to, defaults to
&#39;test/html_reports&#39; :erb_template - the path to a custom ERB
template, defaults to the supplied ERB template :mode - Useful for
debugging, :terse suppresses errors and is the default, :verbose lets
errors bubble up :output_filename - the report&#39;s filename, defaults to
&#39;index.html&#39;</p>
          
          
            <div class="method-calls-super">
              Calls superclass method
              <a href="BaseReporter.html#method-c-new">Minitest::Reporters::BaseReporter.new</a>
            </div>
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/minitest/reporters/html_reporter.rb, line 56</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">args</span> = {})
  <span class="ruby-keyword">super</span>({})

  <span class="ruby-identifier">defaults</span> = {
      <span class="ruby-value">:title</span>           =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Test Results&#39;</span>,
      <span class="ruby-value">:erb_template</span>    =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{File.dirname(__FILE__)}/../templates/index.html.erb&quot;</span>,
      <span class="ruby-value">:reports_dir</span>     =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;test/html_reports&#39;</span>,
      <span class="ruby-value">:mode</span>            =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:safe</span>,
      <span class="ruby-value">:output_filename</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;index.html&#39;</span>
  }

  <span class="ruby-identifier">settings</span> = <span class="ruby-identifier">defaults</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">args</span>)

  <span class="ruby-ivar">@mode</span> = <span class="ruby-identifier">settings</span>[<span class="ruby-value">:mode</span>]
  <span class="ruby-ivar">@title</span> = <span class="ruby-identifier">settings</span>[<span class="ruby-value">:title</span>]
  <span class="ruby-ivar">@erb_template</span> = <span class="ruby-identifier">settings</span>[<span class="ruby-value">:erb_template</span>]
  <span class="ruby-ivar">@output_filename</span> = <span class="ruby-identifier">settings</span>[<span class="ruby-value">:output_filename</span>]
  <span class="ruby-identifier">reports_dir</span> = <span class="ruby-identifier">settings</span>[<span class="ruby-value">:reports_dir</span>]

  <span class="ruby-ivar">@reports_path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">absolute_path</span>(<span class="ruby-identifier">reports_dir</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-friendly_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">friendly_name</span><span
            class="method-args">(test)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Trims off the number prefix on test names when using <a
href="../../Minitest.html">Minitest</a> Specs</p>
          
          

          
          <div class="method-source-code" id="friendly_name-source">
            <pre><span class="ruby-comment"># File lib/minitest/reporters/html_reporter.rb, line 44</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">friendly_name</span>(<span class="ruby-identifier">test</span>)
  <span class="ruby-identifier">groups</span> = <span class="ruby-identifier">test</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp">/(test_\d+_)(.*)/i</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">test</span>.<span class="ruby-identifier">name</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">groups</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-node">&quot;it #{groups[0][1]}&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-passes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">passes</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>The number of tests that passed</p>
          
          

          
          <div class="method-source-code" id="passes-source">
            <pre><span class="ruby-comment"># File lib/minitest/reporters/html_reporter.rb, line 24</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">passes</span>
  <span class="ruby-identifier">count</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">failures</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">errors</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">skips</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-percent_errors_failures" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">percent_errors_failures</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>The percentage of tests that failed</p>
          
          

          
          <div class="method-source-code" id="percent_errors_failures-source">
            <pre><span class="ruby-comment"># File lib/minitest/reporters/html_reporter.rb, line 39</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">percent_errors_failures</span>
  ((<span class="ruby-identifier">errors</span><span class="ruby-operator">+</span><span class="ruby-identifier">failures</span>)<span class="ruby-operator">/</span><span class="ruby-identifier">count</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">*</span> <span class="ruby-value">100</span>).<span class="ruby-identifier">to_i</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-percent_passes" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">percent_passes</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>The percentage of tests that passed, calculated in a way that avoids
rounding errors</p>
          
          

          
          <div class="method-source-code" id="percent_passes-source">
            <pre><span class="ruby-comment"># File lib/minitest/reporters/html_reporter.rb, line 29</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">percent_passes</span>
  <span class="ruby-value">100</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">percent_skipps</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">percent_errors_failures</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-percent_skipps" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">percent_skipps</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>The percentage of tests that were skipped</p>
          
          

          
          <div class="method-source-code" id="percent_skipps-source">
            <pre><span class="ruby-comment"># File lib/minitest/reporters/html_reporter.rb, line 34</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">percent_skipps</span>
  (<span class="ruby-identifier">skips</span><span class="ruby-operator">/</span><span class="ruby-identifier">count</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">*</span> <span class="ruby-value">100</span>).<span class="ruby-identifier">to_i</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-report" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">report</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Called by the framework to generate the report</p>
          
          
            <div class="method-calls-super">
              Calls superclass method
              <a href="BaseReporter.html#method-i-report">Minitest::Reporters::BaseReporter#report</a>
            </div>
          

          
          <div class="method-source-code" id="report-source">
            <pre><span class="ruby-comment"># File lib/minitest/reporters/html_reporter.rb, line 87</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">report</span>
  <span class="ruby-keyword">super</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Writing HTML reports to #{@reports_path}&quot;</span>
    <span class="ruby-identifier">erb_str</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-ivar">@erb_template</span>)
    <span class="ruby-identifier">renderer</span> = <span class="ruby-constant">ERB</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">erb_str</span>)

    <span class="ruby-identifier">tests_by_suites</span> = <span class="ruby-identifier">tests</span>.<span class="ruby-identifier">group_by</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:class</span>) <span class="ruby-comment"># taken from the JUnit reporter</span>

    <span class="ruby-identifier">suites</span> = <span class="ruby-identifier">tests_by_suites</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">suite</span>, <span class="ruby-identifier">tests</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">suite_summary</span> = <span class="ruby-identifier">summarize_suite</span>(<span class="ruby-identifier">suite</span>, <span class="ruby-identifier">tests</span>)
      <span class="ruby-identifier">suite_summary</span>[<span class="ruby-value">:tests</span>] = <span class="ruby-identifier">tests</span>.<span class="ruby-identifier">sort</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">compare_tests</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>) }
      <span class="ruby-identifier">suite_summary</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">suites</span>.<span class="ruby-identifier">sort!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">compare_suites</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>) }

    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">renderer</span>.<span class="ruby-identifier">result</span>(<span class="ruby-identifier">binding</span>)
    <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">html_file</span>, <span class="ruby-string">&#39;w&#39;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">result</span>)
    <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">puts</span> <span class="ruby-string">&#39;There was an error writing the HTML report&#39;</span>
    <span class="ruby-identifier">puts</span> <span class="ruby-string">&#39;This may have been caused by cancelling the test run&#39;</span>
    <span class="ruby-identifier">puts</span> <span class="ruby-string">&#39;Use mode =&gt; :verbose in the HTML reporters constructor to see more detail&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@mode</span> <span class="ruby-operator">==</span> <span class="ruby-value">:terse</span>
    <span class="ruby-identifier">puts</span> <span class="ruby-string">&#39;Use mode =&gt; :terse in the HTML reporters constructor to see less detail&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@mode</span> <span class="ruby-operator">!=</span> <span class="ruby-value">:terse</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-identifier">e</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@mode</span> <span class="ruby-operator">!=</span> <span class="ruby-value">:terse</span>
  <span class="ruby-keyword">end</span>

<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-start" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">start</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="start-source">
            <pre><span class="ruby-comment"># File lib/minitest/reporters/html_reporter.rb, line 78</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">start</span>
  <span class="ruby-keyword">super</span>

  <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Emptying #{@reports_path}&quot;</span>
  <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span>(<span class="ruby-ivar">@reports_path</span>)
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">html_file</span>) <span class="ruby-keyword">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">html_file</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="private-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Private Instance Methods</h3>
       </header>

    
      <div id="method-i-compare_suites" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">compare_suites</span><span
            class="method-args">(suite_a, suite_b)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Test suites are first ordered by evaluating the results of the tests, then
by test suite name Test suites which have failing tests are given highest
order Tests suites which have skipped tests are given second highest
priority</p>
          
          

          
          <div class="method-source-code" id="compare_suites-source">
            <pre><span class="ruby-comment"># File lib/minitest/reporters/html_reporter.rb, line 136</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">compare_suites</span>(<span class="ruby-identifier">suite_a</span>, <span class="ruby-identifier">suite_b</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">compare_suites_by_name</span>(<span class="ruby-identifier">suite_a</span>, <span class="ruby-identifier">suite_b</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">suite_a</span>[<span class="ruby-value">:has_errors_or_failures</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">suite_b</span>[<span class="ruby-value">:has_errors_or_failures</span>]
  <span class="ruby-keyword">return</span> <span class="ruby-value">-1</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">suite_a</span>[<span class="ruby-value">:has_errors_or_failures</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">suite_b</span>[<span class="ruby-value">:has_errors_or_failures</span>]
  <span class="ruby-keyword">return</span> <span class="ruby-value">1</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">suite_a</span>[<span class="ruby-value">:has_errors_or_failures</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">suite_b</span>[<span class="ruby-value">:has_errors_or_failures</span>]

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">compare_suites_by_name</span>(<span class="ruby-identifier">suite_a</span>, <span class="ruby-identifier">suite_b</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">suite_a</span>[<span class="ruby-value">:has_skipps</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">suite_b</span>[<span class="ruby-value">:has_skipps</span>]
  <span class="ruby-keyword">return</span> <span class="ruby-value">-1</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">suite_a</span>[<span class="ruby-value">:has_skipps</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">suite_b</span>[<span class="ruby-value">:has_skipps</span>]
  <span class="ruby-keyword">return</span> <span class="ruby-value">1</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">suite_a</span>[<span class="ruby-value">:has_skipps</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">suite_b</span>[<span class="ruby-value">:has_skipps</span>]

  <span class="ruby-identifier">compare_suites_by_name</span>(<span class="ruby-identifier">suite_a</span>, <span class="ruby-identifier">suite_b</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-compare_suites_by_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">compare_suites_by_name</span><span
            class="method-args">(suite_a, suite_b)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="compare_suites_by_name-source">
            <pre><span class="ruby-comment"># File lib/minitest/reporters/html_reporter.rb, line 125</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">compare_suites_by_name</span>(<span class="ruby-identifier">suite_a</span>, <span class="ruby-identifier">suite_b</span>)
  <span class="ruby-identifier">suite_a</span>[<span class="ruby-value">:name</span>] <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">suite_b</span>[<span class="ruby-value">:name</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-compare_tests" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">compare_tests</span><span
            class="method-args">(test_a, test_b)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Tests are first ordered by evaluating the results of the tests, then by
tests names Tess which fail are given highest order Tests which are skipped
are given second highest priority</p>
          
          

          
          <div class="method-source-code" id="compare_tests-source">
            <pre><span class="ruby-comment"># File lib/minitest/reporters/html_reporter.rb, line 151</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">compare_tests</span>(<span class="ruby-identifier">test_a</span>, <span class="ruby-identifier">test_b</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">compare_tests_by_name</span>(<span class="ruby-identifier">test_a</span>, <span class="ruby-identifier">test_b</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">test_fail_or_error?</span>(<span class="ruby-identifier">test_a</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">test_fail_or_error?</span>(<span class="ruby-identifier">test_b</span>)

  <span class="ruby-keyword">return</span> <span class="ruby-value">-1</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">test_fail_or_error?</span>(<span class="ruby-identifier">test_a</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">test_fail_or_error?</span>(<span class="ruby-identifier">test_b</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-value">1</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">test_fail_or_error?</span>(<span class="ruby-identifier">test_a</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">test_fail_or_error?</span>(<span class="ruby-identifier">test_b</span>)

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">compare_tests_by_name</span>(<span class="ruby-identifier">test_a</span>, <span class="ruby-identifier">test_b</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">test_a</span>.<span class="ruby-identifier">skipped?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">test_b</span>.<span class="ruby-identifier">skipped?</span>
  <span class="ruby-keyword">return</span> <span class="ruby-value">-1</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">test_a</span>.<span class="ruby-identifier">skipped?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">test_b</span>.<span class="ruby-identifier">skipped?</span>
  <span class="ruby-keyword">return</span> <span class="ruby-value">1</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">test_a</span>.<span class="ruby-identifier">skipped?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">test_b</span>.<span class="ruby-identifier">skipped?</span>

  <span class="ruby-identifier">compare_tests_by_name</span>(<span class="ruby-identifier">test_a</span>, <span class="ruby-identifier">test_b</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-compare_tests_by_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">compare_tests_by_name</span><span
            class="method-args">(test_a, test_b)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="compare_tests_by_name-source">
            <pre><span class="ruby-comment"># File lib/minitest/reporters/html_reporter.rb, line 129</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">compare_tests_by_name</span>(<span class="ruby-identifier">test_a</span>, <span class="ruby-identifier">test_b</span>)
  <span class="ruby-identifier">friendly_name</span>(<span class="ruby-identifier">test_a</span>) <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">friendly_name</span>(<span class="ruby-identifier">test_b</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-html_file" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">html_file</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="html_file-source">
            <pre><span class="ruby-comment"># File lib/minitest/reporters/html_reporter.rb, line 121</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">html_file</span>
  <span class="ruby-node">&quot;#{@reports_path}/#{@output_filename}&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-location" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">location</span><span
            class="method-args">(exception)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>taken from the JUnit reporter</p>
          
          

          
          <div class="method-source-code" id="location-source">
            <pre><span class="ruby-comment"># File lib/minitest/reporters/html_reporter.rb, line 201</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">location</span>(<span class="ruby-identifier">exception</span>)
  <span class="ruby-identifier">last_before_assertion</span> = <span class="ruby-string">&#39;&#39;</span>
  <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">backtrace</span>.<span class="ruby-identifier">reverse_each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">break</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">s</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/in .(assert|refute|flunk|pass|fail|raise|must|wont)/</span>
    <span class="ruby-identifier">last_before_assertion</span> = <span class="ruby-identifier">s</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">last_before_assertion</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp">/:in .*$/</span>, <span class="ruby-string">&#39;&#39;</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-message_for" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">message_for</span><span
            class="method-args">(test)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>based on <a
href="HtmlReporter.html#method-i-message_for">#message_for</a>(test) from
the JUnit reporter</p>
          
          

          
          <div class="method-source-code" id="message_for-source">
            <pre><span class="ruby-comment"># File lib/minitest/reporters/html_reporter.rb, line 184</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">message_for</span>(<span class="ruby-identifier">test</span>)
  <span class="ruby-identifier">suite</span> = <span class="ruby-identifier">test</span>.<span class="ruby-identifier">class</span>
  <span class="ruby-identifier">name</span> = <span class="ruby-identifier">test</span>.<span class="ruby-identifier">name</span>
  <span class="ruby-identifier">e</span> = <span class="ruby-identifier">test</span>.<span class="ruby-identifier">failure</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">test</span>.<span class="ruby-identifier">passed?</span>
    <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">test</span>.<span class="ruby-identifier">skipped?</span>
    <span class="ruby-node">&quot;Skipped:\n#{name}(#{suite}) [#{location(e)}]:\n#{e.message}\n&quot;</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">test</span>.<span class="ruby-identifier">failure</span>
    <span class="ruby-node">&quot;Failure:\n#{name}(#{suite}) [#{location(e)}]:\n#{e.message}\n&quot;</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">test</span>.<span class="ruby-identifier">error?</span>
    <span class="ruby-node">&quot;Error:\n#{name}(#{suite}):\n#{e.message}&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-summarize_suite" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">summarize_suite</span><span
            class="method-args">(suite, tests)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>based on analyze_suite from the JUnit reporter</p>
          
          

          
          <div class="method-source-code" id="summarize_suite-source">
            <pre><span class="ruby-comment"># File lib/minitest/reporters/html_reporter.rb, line 169</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">summarize_suite</span>(<span class="ruby-identifier">suite</span>, <span class="ruby-identifier">tests</span>)
  <span class="ruby-identifier">summary</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">0</span>)
  <span class="ruby-identifier">summary</span>[<span class="ruby-value">:name</span>] = <span class="ruby-identifier">suite</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">tests</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">test</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">summary</span>[<span class="ruby-value">:&quot;#{result(test)}_count&quot;</span>] <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
    <span class="ruby-identifier">summary</span>[<span class="ruby-value">:assertion_count</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">test</span>.<span class="ruby-identifier">assertions</span>
    <span class="ruby-identifier">summary</span>[<span class="ruby-value">:test_count</span>] <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
    <span class="ruby-identifier">summary</span>[<span class="ruby-value">:time</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">test</span>.<span class="ruby-identifier">time</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">summary</span>[<span class="ruby-value">:has_errors_or_failures</span>] = (<span class="ruby-identifier">summary</span>[<span class="ruby-value">:fail_count</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">summary</span>[<span class="ruby-value">:error_count</span>]) <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
  <span class="ruby-identifier">summary</span>[<span class="ruby-value">:has_skipps</span>] = <span class="ruby-identifier">summary</span>[<span class="ruby-value">:skip_count</span>] <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
  <span class="ruby-identifier">summary</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-test_fail_or_error-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">test_fail_or_error?</span><span
            class="method-args">(test)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="test_fail_or_error-3F-source">
            <pre><span class="ruby-comment"># File lib/minitest/reporters/html_reporter.rb, line 164</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">test_fail_or_error?</span>(<span class="ruby-identifier">test</span>)
  <span class="ruby-identifier">test</span>.<span class="ruby-identifier">error?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">test</span>.<span class="ruby-identifier">failure</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-total_time_to_hms" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">total_time_to_hms</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="total_time_to_hms-source">
            <pre><span class="ruby-comment"># File lib/minitest/reporters/html_reporter.rb, line 210</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">total_time_to_hms</span>
  <span class="ruby-keyword">return</span> (<span class="ruby-string">&#39;%.2fs&#39;</span> <span class="ruby-operator">%</span> <span class="ruby-identifier">total_time</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">total_time</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1</span>

  <span class="ruby-identifier">hours</span> = (<span class="ruby-identifier">total_time</span> <span class="ruby-operator">/</span> (<span class="ruby-value">60</span> <span class="ruby-operator">*</span> <span class="ruby-value">60</span>)).<span class="ruby-identifier">round</span>
  <span class="ruby-identifier">minutes</span> = ((<span class="ruby-identifier">total_time</span> <span class="ruby-operator">/</span> <span class="ruby-value">60</span>) <span class="ruby-operator">%</span> <span class="ruby-value">60</span>).<span class="ruby-identifier">round</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">rjust</span>(<span class="ruby-value">2</span>,<span class="ruby-string">&#39;0&#39;</span>)
  <span class="ruby-identifier">seconds</span> = (<span class="ruby-identifier">total_time</span> <span class="ruby-operator">%</span> <span class="ruby-value">60</span>).<span class="ruby-identifier">round</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">rjust</span>(<span class="ruby-value">2</span>,<span class="ruby-string">&#39;0&#39;</span>)

  <span class="ruby-node">&quot;#{ hours }h#{ minutes }m#{ seconds }s&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://rdoc.github.io/rdoc">RDoc</a> 5.1.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

