<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>History - openssl-2.0.6 Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
  var index_rel_prefix = "./";
</script>

<script src="./js/jquery.js"></script>
<script src="./js/darkfish.js"></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#label-Version+2.0.6">Version 2.0.6</a>
    <li><a href="#label-Bug+fixes">Bug fixes</a>
    <li><a href="#label-Version+2.0.5">Version 2.0.5</a>
    <li><a href="#label-Bug+fixes">Bug fixes</a>
    <li><a href="#label-Version+2.0.4">Version 2.0.4</a>
    <li><a href="#label-Bug+fixes">Bug fixes</a>
    <li><a href="#label-Version+2.0.3">Version 2.0.3</a>
    <li><a href="#label-Bug+fixes">Bug fixes</a>
    <li><a href="#label-Version+2.0.2">Version 2.0.2</a>
    <li><a href="#label-Bug+fixes">Bug fixes</a>
    <li><a href="#label-Version+2.0.1">Version 2.0.1</a>
    <li><a href="#label-Bug+fixes">Bug fixes</a>
    <li><a href="#label-Version+2.0.0">Version 2.0.0</a>
    <li><a href="#label-Compatibility+notes">Compatibility notes</a>
    <li><a href="#label-Supported+platforms">Supported platforms</a>
    <li><a href="#label-Notable+changes">Notable changes</a>
    <li><a href="#label-Removals">Removals</a>
    <li><a href="#label-Deprecations">Deprecations</a>
  </ul>
</div>


  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="./CONTRIBUTING_md.html">CONTRIBUTING</a>
  
    <li><a href="./History_md.html">History</a>
  
    <li><a href="./README_md.html">README</a>
  
    <li><a href="./ext/openssl/Makefile.html">Makefile</a>
  
    <li><a href="./ext/openssl/openssl-x64-mingw32_def.html">openssl-x64-mingw32.def</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page History.md">

<h1 id="label-Version+2.0.6">Version 2.0.6<span><a href="#label-Version+2.0.6">&para;</a> <a href="#top">&uarr;</a></span></h1>

<h2 id="label-Bug+fixes">Bug fixes<span><a href="#label-Bug+fixes">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p>The session_remove_cb set to an <a
href="OpenSSL/SSL/SSLContext.html">OpenSSL::SSL::SSLContext</a> is no
longer called  during GC.</p>
</li><li>
<p>A possible deadlock in <a
href="OpenSSL/SSL/SSLSocket.html#method-i-sysread">OpenSSL::SSL::SSLSocket#sysread</a>
is fixed.  <a href="https://github.com/ruby/openssl/pull/139">[GitHub
#139]</a></p>
</li><li>
<p><a href="OpenSSL/BN.html#method-i-hash">OpenSSL::BN#hash</a> could return
an unnormalized fixnum value on Windows.  <a
href="https://bugs.ruby-lang.org/issues/13877">[Bug #13877]</a></p>
</li><li>
<p><a
href="OpenSSL/SSL/SSLSocket.html#method-i-sysread">OpenSSL::SSL::SSLSocket#sysread</a>
and sysread_nonblock set the length of the  destination buffer String to 0
on error.  <a href="https://github.com/ruby/openssl/pull/153">[GitHub
#153]</a></p>
</li><li>
<p>Possible deadlock is fixed. This happened only when built with older
versions  of <a href="OpenSSL.html">OpenSSL</a> (before 1.1.0) or LibreSSL.
<a href="https://github.com/ruby/openssl/pull/155">[GitHub #155]</a></p>
</li></ul>

<h1 id="label-Version+2.0.5">Version 2.0.5<span><a href="#label-Version+2.0.5">&para;</a> <a href="#top">&uarr;</a></span></h1>

<h2 id="label-Bug+fixes">Bug fixes<span><a href="#label-Bug+fixes">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p>Reading a PEM/DER-encoded private key or certificate from an <a
href="IO.html">IO</a> object did  not work properly on mswin platforms.  <a
href="https://github.com/ruby/openssl/issues/128">[ruby/openssl#128]</a></p>
</li><li>
<p>Broken length check in the PEM passphrase callback is fixed.</p>
</li><li>
<p>It failed to compile when <a href="OpenSSL.html">OpenSSL</a> is configured
without TLS 1.0 support.</p>
</li></ul>

<h1 id="label-Version+2.0.4">Version 2.0.4<span><a href="#label-Version+2.0.4">&para;</a> <a href="#top">&uarr;</a></span></h1>

<h2 id="label-Bug+fixes">Bug fixes<span><a href="#label-Bug+fixes">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p>It now compiles with LibreSSL without renaming on Windows (mswin).</p>
</li><li>
<p>A workaround for the error queue leak of X509_load_cert_crl_file() that 
causes random errors is added.  <a
href="https://bugs.ruby-lang.org/issues/11033">[Bug #11033]</a></p>
</li></ul>

<h1 id="label-Version+2.0.3">Version 2.0.3<span><a href="#label-Version+2.0.3">&para;</a> <a href="#top">&uarr;</a></span></h1>

<h2 id="label-Bug+fixes">Bug fixes<span><a href="#label-Bug+fixes">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p><a
href="OpenSSL/ASN1/Constructive.html#method-i-each">OpenSSL::ASN1::Constructive#each</a>
which was broken by 2.0.0 is fixed.  <a
href="https://github.com/ruby/openssl/pull/96">[ruby/openssl#96]</a></p>
</li><li>
<p>Fixed build with static <a href="OpenSSL.html">OpenSSL</a> libraries on
Windows.  <a href="https://bugs.ruby-lang.org/issues/13080">[Bug
#13080]</a></p>
</li><li>
<p><a
href="OpenSSL/X509/Name.html#method-i-eql-3F">OpenSSL::X509::Name#eql?</a>
which was broken by 2.0.0 is fixed.</p>
</li></ul>

<h1 id="label-Version+2.0.2">Version 2.0.2<span><a href="#label-Version+2.0.2">&para;</a> <a href="#top">&uarr;</a></span></h1>

<h2 id="label-Bug+fixes">Bug fixes<span><a href="#label-Bug+fixes">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p>Fix build with early 0.9.8 series which did not have
SSL_CTX_clear_options().  [ruby-core:78693]</p>
</li></ul>

<h1 id="label-Version+2.0.1">Version 2.0.1<span><a href="#label-Version+2.0.1">&para;</a> <a href="#top">&uarr;</a></span></h1>

<h2 id="label-Bug+fixes">Bug fixes<span><a href="#label-Bug+fixes">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p>A GC issue around <a href="OpenSSL/BN.html">OpenSSL::BN</a> is fixed.  <a
href="https://github.com/ruby/openssl/issues/87">[ruby/openssl#87]</a></p>
</li><li>
<p><a href="OpenSSL/ASN1.html">OpenSSL::ASN1</a> now parses BER encoding of
GeneralizedTime without seconds.  <a
href="https://github.com/ruby/openssl/pull/88">[ruby/openssl#88]</a></p>
</li></ul>

<h1 id="label-Version+2.0.0">Version 2.0.0<span><a href="#label-Version+2.0.0">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p>This is the first release of openssl gem, formerly a standard library of
Ruby, ext/openssl. This is the successor of the version included in Ruby
2.3.</p>

<h2 id="label-Compatibility+notes">Compatibility notes<span><a href="#label-Compatibility+notes">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p>Support for <a href="OpenSSL.html">OpenSSL</a> version 0.9.6 and 0.9.7 is
completely removed. openssl gem  still works with <a
href="OpenSSL.html">OpenSSL</a> 0.9.8, but users are strongly encouraged to
upgrade  to at least 1.0.1, as <a href="OpenSSL.html">OpenSSL</a> &lt;
1.0.1 will not receive any security fixes from  the <a
href="OpenSSL.html">OpenSSL</a> development team.</p>
</li></ul>

<h2 id="label-Supported+platforms">Supported platforms<span><a href="#label-Supported+platforms">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p><a href="OpenSSL.html">OpenSSL</a> 1.0.0, 1.0.1, 1.0.2, 1.1.0</p>
</li><li>
<p><a href="OpenSSL.html">OpenSSL</a> &lt; 0.9.8 is no longer supported.</p>
</li><li>
<p>LibreSSL 2.3, 2.4, 2.5</p>
</li><li>
<p>Ruby 2.3, 2.4</p>
</li></ul>

<h2 id="label-Notable+changes">Notable changes<span><a href="#label-Notable+changes">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p>Add support for <a href="OpenSSL.html">OpenSSL</a> 1.1.0.  <a
href="https://bugs.ruby-lang.org/issues/12324">[Feature #12324]</a></p>
</li><li>
<p>Add support for LibreSSL</p>
</li><li>
<p><a href="OpenSSL/Cipher.html">OpenSSL::Cipher</a></p>
</li><li>
<p><a href="OpenSSL/Cipher.html#method-i-key-3D">OpenSSL::Cipher#key=</a> and
iv= reject too long inputs. They used to truncate silently. <a
href="https://bugs.ruby-lang.org/issues/12561">[Bug #12561]</a></p>
</li><li>
<p><a
href="OpenSSL/Cipher.html#method-i-iv_len-3D">OpenSSL::Cipher#iv_len=</a>
is added. It allows changing IV (nonce) length if using AEAD ciphers. <a
href="https://bugs.ruby-lang.org/issues/8667">[Bug #8667]</a>, <a
href="https://bugs.ruby-lang.org/issues/10420">[Bug #10420]</a>, <a
href="https://github.com/ruby/ruby/pull/569">[GH ruby/ruby#569]</a>, <a
href="https://github.com/ruby/openssl/pull/58">[GH ruby/openssl#58]</a></p>
</li><li>
<p><a
href="OpenSSL/Cipher.html#method-i-auth_tag_len-3D">OpenSSL::Cipher#auth_tag_len=</a>
is added. This sets the authentication tag length to be generated by an
AEAD cipher.</p>
</li><li>
<p><a href="OpenSSL/OCSP.html">OpenSSL::OCSP</a></p>
</li><li>
<p>Accessor methods are added to <a
href="OpenSSL/OCSP/CertificateId.html">OpenSSL::OCSP::CertificateId</a>. <a
href="https://bugs.ruby-lang.org/issues/7181">[Feature #7181]</a></p>
</li><li>
<p><a href="OpenSSL/OCSP/Request.html">OpenSSL::OCSP::Request</a> and
BasicResponse can be signed with non-SHA-1 hash algorithm. <a
href="https://bugs.ruby-lang.org/issues/11552">[Feature #11552]</a></p>
</li><li>
<p><a href="OpenSSL/OCSP/CertificateId.html">OpenSSL::OCSP::CertificateId</a>
and BasicResponse can be encoded into DER.</p>
</li><li>
<p>A new class <a
href="OpenSSL/OCSP/SingleResponse.html">OpenSSL::OCSP::SingleResponse</a>
is added for convenience.</p>
</li><li>
<p><a
href="OpenSSL/OCSP/BasicResponse.html#method-i-add_status">OpenSSL::OCSP::BasicResponse#add_status</a>
accepts absolute times. They used to accept only relative seconds from the
current time.</p>
</li><li>
<p><a href="OpenSSL/PKey.html">OpenSSL::PKey</a></p>
</li><li>
<p><a href="OpenSSL/PKey/EC.html">OpenSSL::PKey::EC</a> follows the general
PKey interface. <a href="https://bugs.ruby-lang.org/issues/6567">[Bug
#6567]</a></p>
</li><li>
<p><a href="OpenSSL/PKey.html#method-c-read">OpenSSL::PKey.read</a> raises <a
href="OpenSSL/PKey/PKeyError.html">OpenSSL::PKey::PKeyError</a> instead of
ArgumentError for consistency with OpenSSL::PKey::<a
href="https://bugs.ruby-lang.org/issues/11774">DH,DSA,RSA,EC}#new. {[Bug
#11774]</a>, <a href="https://github.com/ruby/openssl/pull/55">[GH
ruby/openssl#55]</a></p>
</li><li>
<p><a href="OpenSSL/PKey/EC/Group.html">OpenSSL::PKey::EC::Group</a> retrieved
by <a
href="OpenSSL/PKey/EC.html#method-i-group">OpenSSL::PKey::EC#group</a> is
no longer linked with the EC key. Modifications to the EC::Group have no
effect on the key. <a href="https://github.com/ruby/openssl/pull/71">[GH
ruby/openssl#71]</a></p>
</li><li>
<p><a
href="OpenSSL/PKey/EC/Point.html#method-i-to_bn">OpenSSL::PKey::EC::Point#to_bn</a>
allows specifying the point conversion form by the optional argument.</p>
</li><li>
<p><a href="OpenSSL/SSL.html">OpenSSL::SSL</a></p>
</li><li>
<p><a
href="OpenSSL/SSL/SSLSocket.html#method-i-tmp_key">OpenSSL::SSL::SSLSocket#tmp_key</a>
is added. A client can call it after the connection is established to
retrieve the ephemeral key. <a
href="https://github.com/ruby/ruby/pull/1318">[GH ruby/ruby#1318]</a></p>
</li><li>
<p>The automatic ephemeral ECDH curve selection is enabled by default when
built with <a href="OpenSSL.html">OpenSSL</a> &gt;= 1.0.2 or LibreSSL.</p>
</li><li>
<p><a
href="OpenSSL/SSL/SSLContext.html#method-i-security_level-3D">OpenSSL::SSL::SSLContext#security_level=</a>
is added. You can set the “security level” of the SSL context. This is
effective only when built with <a href="OpenSSL.html">OpenSSL</a> 1.1.0.</p>
</li><li>
<p>A new option &#39;verify_hostname&#39; is added to <a
href="OpenSSL/SSL/SSLContext.html">OpenSSL::SSL::SSLContext</a>. When it is
enabled, and the SNI hostname is also set, the hostname verification on the
server certificate is automatically performed. It is now enabled by
OpenSSL::SSL::Context#set_params. <a
href="https://github.com/ruby/openssl/pull/60">[GH ruby/openssl#60]</a></p>
</li></ul>

<h2 id="label-Removals">Removals<span><a href="#label-Removals">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p><a href="OpenSSL/Engine.html">OpenSSL::Engine</a></p>
</li><li>
<p><a href="OpenSSL/Engine.html#method-c-cleanup">OpenSSL::Engine.cleanup</a>
does nothing when built with <a href="OpenSSL.html">OpenSSL</a> 1.1.0.</p>
</li><li>
<p><a href="OpenSSL/SSL.html">OpenSSL::SSL</a></p>
</li><li>
<p>OpenSSL::PKey::DH::DEFAULT_512 is removed. Hence servers no longer use
512-bit DH group by default. It is considered too weak nowadays. <a
href="https://bugs.ruby-lang.org/issues/11968">[Bug #11968]</a>, <a
href="https://github.com/ruby/ruby/pull/1196">[GH ruby/ruby#1196]</a></p>
</li><li>
<p>RC4 cipher suites are removed from
OpenSSL::SSL::SSLContext::DEFAULT_PARAMS. RC4 is now considered to be weak.
<a href="https://github.com/ruby/openssl/pull/50">[GH ruby/openssl#50]</a></p>
</li></ul>

<h2 id="label-Deprecations">Deprecations<span><a href="#label-Deprecations">&para;</a> <a href="#top">&uarr;</a></span></h2>
<ul><li>
<p><a href="OpenSSL/PKey.html">OpenSSL::PKey</a></p>
</li><li>
<p>OpenSSL::PKey::RSA#n=, e=, d=, p=, q=, dmp1=, dmq1=, iqmp=,
OpenSSL::PKey::DSA#p=, q=, g=, priv_key=, pub_key=, OpenSSL::PKey::DH#p=,
g=, priv_key= and pub_key= are deprecated. They are disabled when built
with <a href="OpenSSL.html">OpenSSL</a> 1.1.0, due to its API change.
Instead, <a
href="OpenSSL/PKey/RSA.html#method-i-set_key">OpenSSL::PKey::RSA#set_key</a>,
set_factors, set_crt_params, <a
href="OpenSSL/PKey/DSA.html#method-i-set_pqg">OpenSSL::PKey::DSA#set_pqg</a>,
set_key, <a
href="OpenSSL/PKey/DH.html#method-i-set_pqg">OpenSSL::PKey::DH#set_pqg</a>
and set_key are added.</p>
</li><li>
<p><a href="OpenSSL/Random.html">OpenSSL::Random</a></p>
</li><li>
<p><a
href="OpenSSL/Random.html#method-c-pseudo_bytes">OpenSSL::Random.pseudo_bytes</a>
is deprecated, and not defined when built with <a
href="OpenSSL.html">OpenSSL</a> 1.1.0. Use <a
href="OpenSSL/Random.html#method-c-random_bytes">OpenSSL::Random.random_bytes</a>
instead.</p>
</li><li>
<p><a href="OpenSSL/SSL.html">OpenSSL::SSL</a></p>
</li><li>
<p><a
href="OpenSSL/SSL/SSLContext.html#attribute-i-tmp_ecdh_callback">OpenSSL::SSL::SSLContext#tmp_ecdh_callback</a>
is deprecated, as the underlying API SSL_CTX_set_tmp_ecdh_callback() is
removed in <a href="OpenSSL.html">OpenSSL</a> 1.1.0. It was first added in
Ruby 2.3.0. To specify the curve to be used in ephemeral ECDH, use <a
href="OpenSSL/SSL/SSLContext.html#method-i-ecdh_curves-3D">OpenSSL::SSL::SSLContext#ecdh_curves=</a>.
The automatic curve selection is also now enabled by default when built
with a capable <a href="OpenSSL.html">OpenSSL</a>.</p>
</li></ul>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://rdoc.github.io/rdoc">RDoc</a> 5.1.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

